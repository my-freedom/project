<!DOCTYPE html>
<html>
<head>
<meta name="data-spm" content="a2107" />
<title>跳蚤市场 - 淘！我喜欢</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta http-equiv="imagetoolbar" content="no" />
<link rel="stylesheet" href="tiaosao.css" type="text/css" />
<script>
function getLength(str){
    return str.replace(/[^\x00-xff]/g,"xx").length;
    }
   window.onload=function() {
   var aInput =document.getElementsByTagName("input");
   var oName = aInput[0];
   var pwd = aInput[1];
   var pwd2 = aInput[2];
   var aP = document.getElementsByTagName("p");
   var name_msg = aP[0];
   var pwd_msg = aP[1];
   var pwd2_msg = aP[2];
   var count = document.getElementById("count");
   var aEm = document.getElementsByTagName("em");
   var name_length = 0;
   oName.onfocus = function () {
      name_msg.style.display = "block";
      name_msg.innerHTML = '<i class="ati"></i> 5-25个字符，一个汉字为两个字符，推荐使用中文会员名'
   };
   oName.onkeyup = function () {
      count.style.visibility = "visible";
      name_length = getLength(this.value);
      count.innerHTML = name_length + '个字符';
      if (name_length == 0) {
         count.style.visibility = "hidden";
      }
   };
   oName.onblur = function () {
      //含非法字符
      var re = /[^\w\u4e00-\u9fa5]/g;
      if (re.test(this.value)) {
         name_msg.innerHTML = '<i class="err"></i>含非法字符!'
      }
      else if (this.value == "") {
         name_msg.innerHTML = '<i class="err"></i>不能为空!'
      }
      else if (name_length > 25) {
         name_msg.innerHTML = '<i class="err"></i>长度超过25个字符!'
      }
      else if (name_length < 6) {
         name_msg.innerHTML = '<i class="err"></i>长度少于6个字符!'
      }
      else {
         name_msg.innerHTML = '<i class="ok"></i>OK!'
      }
   }
   /*输入密码*/
   pwd.onfocus = function () {
      pwd_msg.style.display = "block";
      pwd_msg.innerHTML = '<i class="ati"></i> 6-16个字符，请使用字母加数字或符号组合密码，不能单独使用字母，数字或符号'
   };
   pwd.onkeyup = function () {
      if(this.value.length>5)
      {
      	aEm[1].className="active";
      	pwd2.removeAttribute("disabled");
      	pwd2_msg.style.display="block";
      }else {
      	aEm[1].className="";
      	pwd2.setAttribute("disabled");
      	pwd2_msg.style.display="none";
      }
      if(this.value.length>10){
      	aEm[2].className="active";
      }
      else{
      	aEm[2].className="";
      }
   };
   function findStr(str,n){
   	var tmp=0;
   	for(var i=0;i<str.length;i++){
   		if(str.charAt(i)==n){
   			tmp++;
   		}
   	}
     return tmp;
   }
   var re_n=/[^\d]/g;
   var re_m=/[^a-zA-Z]/g;
   pwd.onblur = function () {
      //含非法字符
      var m = findStr(pwd.value,pwd.value[0]);
      if (this.value =="") {
      pwd_msg.innerHTML = '<i class="err"></i>不能为空!'
      }else if (this.value.length==m) {
         pwd_msg.innerHTML = '<i class="err"></i>不能使用相同字符!'
      }
      else if (this.value.length <6 || this.value.length>16) {
         pwd_msg.innerHTML = '<i class="err"></i>长度应该为6-16个字符'
      }
      else if (!re_n.test(this.value)) {
         pwd_msg.innerHTML = '<i class="err"></i>不能全为数字!'
      }
      else if(!re_m.test(this.value)){
         pwd_msg.innerHTML = '<i class="err"></i>不能全为字母!'
      }
      else {
         pwd_msg.innerHTML = '<i class="ok"></i>OK!';
      }
   }
   /*确认密码*/
   pwd2.onblur=function(){
   	if(this.value!=pwd.value){
   		pwd2_msg.innerHTML = '<i class="err"></i>两次输入的密码不一致!';
   	}
   	else{
   		pwd2_msg.innerHTML = '<i class="ok"></i>OK!';
   	}
   }

}
</script>
</head>
<body>
  <div class="top"><span><a href="#">亲，请登录</a></span><span><a href="tiaosao.html">免费注册</a></span><span><a href="#">手机登录</a></span>
  <ul><li>分类导航</li><li>商品分类</li><li>联系客服</li><li>我的收藏</li><li>购物车</li><li>我的账单</li><li>首页</li></ul>
  </div>
  <div class="right">
  	<form>
  	   <div class="user"><label><span>会员名：</span><input type="text" class="text"></label><p class="msg"><i class="ati"></i>5-25个字符，一个汉字为两个字节，推荐使用中文会员名。</p></div>
  	   <div><label><span></span><b id="count">0个字符</b></label></div>
  	   <div class="pass"><label><span>登录密码：</span><input type="password" class="text"></label><p class="msg"><i class="err"></i>5-25个字符，一个汉字为两个字节，推荐使用中文会员名。</p></div>
  	   <div class="du"><label><span></span><em class="active">弱</em><em>中</em><em>强</em></label></div>
  	   <div class="word"><label><span>确认密码：</span><input type="password" class="text" disabled=""></label><p class="msg"><i class="ati"></i>请再输入一次</p></div>
  	   <div><input class="submitBtn btn" type="submit" value="同意协议并注册"/></div>
  	</form>
  </div>
</body>
</html>
